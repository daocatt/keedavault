# Improved Drag Preview Design

## æ”¹è¿›å†…å®¹

### ä¹‹å‰çš„é¢„è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ 2 entries        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- ç®€å•çš„æ–‡æœ¬æ˜¾ç¤º
- æ²¡æœ‰è¯¦ç»†ä¿¡æ¯
- è§†è§‰æ•ˆæœä¸€èˆ¬

### ç°åœ¨çš„é¢„è§ˆ

#### å•ä¸ª Entry
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘   Gmail Account            â”‚
â”‚       user@gmail.com           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- æ˜¾ç¤º entry æ ‡é¢˜
- æ˜¾ç¤ºç”¨æˆ·åï¼ˆå¦‚æœæœ‰ï¼‰
- æ›´æ¸…æ™°çš„ä¿¡æ¯

#### å¤šä¸ª Entries
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘   3 entries            â‘¢   â”‚
â”‚       Move to group            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- æ˜¾ç¤ºæ•°é‡
- æç¤ºæ“ä½œ
- æ•°å­—å¾½ç« 

## è®¾è®¡ç‰¹ç‚¹

### 1. æ¸…æ™°çš„å¸ƒå±€
```tsx
<div className="flex items-center gap-3">
    {/* Icon */}
    <div className="w-8 h-8 rounded-md bg-accent-light">
        <Key size={16} />
    </div>

    {/* Content */}
    <div className="flex-1 min-w-0">
        <div className="text-sm font-semibold truncate">
            {title}
        </div>
        <div className="text-xs truncate">
            {username}
        </div>
    </div>

    {/* Badge (for multiple) */}
    <div className="w-6 h-6 rounded-full">
        {count}
    </div>
</div>
```

### 2. è§†è§‰å±‚æ¬¡

**ä¸»è¦ä¿¡æ¯**ï¼ˆæ ‡é¢˜ï¼‰ï¼š
- `text-sm font-semibold`
- `color: var(--color-text-primary)`

**æ¬¡è¦ä¿¡æ¯**ï¼ˆç”¨æˆ·å/æç¤ºï¼‰ï¼š
- `text-xs`
- `color: var(--color-text-tertiary)`

**å›¾æ ‡**ï¼š
- 8x8 åœ†è§’æ–¹å—
- æµ…è‰²èƒŒæ™¯ + å¼ºè°ƒè‰²å›¾æ ‡

**å¾½ç« **ï¼ˆå¤šé€‰æ—¶ï¼‰ï¼š
- 6x6 åœ†å½¢
- å¼ºè°ƒè‰²èƒŒæ™¯ + ç™½è‰²æ–‡å­—

### 3. æ”¹è¿›çš„æ ·å¼

```tsx
style={{
    backgroundColor: 'var(--color-bg-primary)',
    borderColor: 'var(--color-accent)',
    boxShadow: '0 8px 24px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(99, 102, 241, 0.1)',
    padding: '10px 14px',
}}
```

**é˜´å½±æ•ˆæœ**ï¼š
- ä¸»é˜´å½±ï¼š`0 8px 24px rgba(0, 0, 0, 0.2)` - æ·±åº¦æ„Ÿ
- è¾¹æ¡†å…‰æ™•ï¼š`0 0 0 1px rgba(99, 102, 241, 0.1)` - ç²¾è‡´æ„Ÿ

**è¾¹æ¡†**ï¼š
- `border-2` - æ›´æ˜æ˜¾çš„è¾¹æ¡†
- `borderColor: var(--color-accent)` - å¼ºè°ƒè‰²

**å†…è¾¹è·**ï¼š
- `padding: 10px 14px` - æ›´èˆ’é€‚çš„é—´è·

## å“åº”å¼è®¾è®¡

### æ–‡æœ¬æˆªæ–­
```tsx
<div className="truncate" title={fullText}>
    {text}
</div>
```
- é•¿æ–‡æœ¬è‡ªåŠ¨æˆªæ–­
- `title` å±æ€§æ˜¾ç¤ºå®Œæ•´å†…å®¹
- `max-w-xs` é™åˆ¶æœ€å¤§å®½åº¦

### çµæ´»å¸ƒå±€
```tsx
<div className="flex-1 min-w-0">
    {/* å†…å®¹åŒºåŸŸå¯ä»¥ä¼¸ç¼© */}
</div>
```
- `flex-1` - å æ®å‰©ä½™ç©ºé—´
- `min-w-0` - å…è®¸å†…å®¹æ”¶ç¼©

## æ¡ä»¶æ¸²æŸ“é€»è¾‘

```tsx
{dragState.isDragging && (() => {
    // 1. è·å–è¢«æ‹–æ‹½çš„ entries
    const draggedEntries = dragState.entryIds
        .map(id => activeEntries.find(e => e.uuid === id))
        .filter(Boolean) as VaultEntry[];
    
    // 2. åˆ¤æ–­æ˜¯å•ä¸ªè¿˜æ˜¯å¤šä¸ª
    const isSingleEntry = draggedEntries.length === 1;
    const firstEntry = draggedEntries[0];

    // 3. æ¸²æŸ“ä¸åŒçš„å†…å®¹
    return (
        <div>
            {isSingleEntry && firstEntry ? (
                // æ˜¾ç¤ºæ ‡é¢˜å’Œç”¨æˆ·å
            ) : (
                // æ˜¾ç¤ºæ•°é‡å’Œæç¤º
            )}
        </div>
    );
})()}
```

## æ˜¾ç¤ºå†…å®¹å†³ç­–æ ‘

```
æ‹–æ‹½å¼€å§‹
    â†“
æ£€æŸ¥ dragState.entryIds.length
    â†“
    â”œâ”€ 1 ä¸ª entry
    â”‚   â†“
    â”‚   æ˜¾ç¤ºï¼š
    â”‚   - Entry æ ‡é¢˜ï¼ˆä¸»è¦ï¼‰
    â”‚   - ç”¨æˆ·åï¼ˆæ¬¡è¦ï¼Œå¦‚æœæœ‰ï¼‰
    â”‚   - Key å›¾æ ‡
    â”‚
    â””â”€ å¤šä¸ª entries
        â†“
        æ˜¾ç¤ºï¼š
        - "X entries"ï¼ˆä¸»è¦ï¼‰
        - "Move to group"ï¼ˆæ¬¡è¦ï¼‰
        - Key å›¾æ ‡
        - æ•°å­—å¾½ç« 
```

## è§†è§‰å¯¹æ¯”

### å•ä¸ª Entry é¢„è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”  Gmail Account           â”‚
â”‚  â”‚ ğŸ”‘ â”‚  user@gmail.com          â”‚
â”‚  â””â”€â”€â”€â”€â”˜                          â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¤šä¸ª Entries é¢„è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”  3 entries          â”Œâ”€â” â”‚
â”‚  â”‚ ğŸ”‘ â”‚  Move to group       â”‚3â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”˜                      â””â”€â”˜ â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸»é¢˜é€‚é…

æ‰€æœ‰é¢œè‰²ä½¿ç”¨ CSS å˜é‡ï¼š
- `--color-bg-primary` - èƒŒæ™¯è‰²
- `--color-text-primary` - ä¸»è¦æ–‡å­—
- `--color-text-tertiary` - æ¬¡è¦æ–‡å­—
- `--color-accent` - å¼ºè°ƒè‰²
- `--color-accent-light` - æµ…è‰²å¼ºè°ƒ

âœ… è‡ªåŠ¨é€‚é…äº®è‰²/æš—è‰²ä¸»é¢˜

## æ€§èƒ½ä¼˜åŒ–

### æ¡ä»¶è®¡ç®—
```tsx
{dragState.isDragging && (() => {
    // åªåœ¨æ‹–æ‹½æ—¶è®¡ç®—
    const draggedEntries = ...;
    return <div>...</div>;
})()}
```
- ä½¿ç”¨ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰
- åªåœ¨ `isDragging` ä¸º true æ—¶æ‰§è¡Œ
- é¿å…ä¸å¿…è¦çš„è®¡ç®—

### æ•°æ®è¿‡æ»¤
```tsx
.map(id => activeEntries.find(e => e.uuid === id))
.filter(Boolean)
```
- é«˜æ•ˆæŸ¥æ‰¾ entries
- è¿‡æ»¤æ‰ undefined å€¼

## ç”¨æˆ·ä½“éªŒæ”¹è¿›

âœ… **æ›´æ¸…æ™°çš„ä¿¡æ¯**
- å•ä¸ª entry æ˜¾ç¤ºå…·ä½“æ ‡é¢˜
- å¤šä¸ª entries æ˜¾ç¤ºæ•°é‡

âœ… **æ›´å¥½çš„è§†è§‰åé¦ˆ**
- æ›´å¤§çš„é˜´å½±
- æ›´æ˜æ˜¾çš„è¾¹æ¡†
- å›¾æ ‡ + æ–‡å­—ç»„åˆ

âœ… **æ›´ä¸“ä¸šçš„å¤–è§‚**
- ç²¾è‡´çš„åœ†è§’
- åˆç†çš„é—´è·
- ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€

## ä»£ç ä½ç½®

- **æ–‡ä»¶**: `components/EntryList.tsx`
- **è¡Œæ•°**: ~1055-1143
- **ç»„ä»¶**: Drag Preview (æ¡ä»¶æ¸²æŸ“)

## æµ‹è¯•åœºæ™¯

- [x] æ‹–æ‹½å•ä¸ª entry â†’ æ˜¾ç¤ºæ ‡é¢˜å’Œç”¨æˆ·å
- [x] æ‹–æ‹½å¤šä¸ª entries â†’ æ˜¾ç¤ºæ•°é‡å’Œå¾½ç« 
- [x] é•¿æ ‡é¢˜è‡ªåŠ¨æˆªæ–­
- [x] æ²¡æœ‰ç”¨æˆ·åæ—¶ä¸æ˜¾ç¤ºç¬¬äºŒè¡Œ
- [x] äº®è‰²/æš—è‰²ä¸»é¢˜æ­£ç¡®æ˜¾ç¤º
- [x] é¢„è§ˆè·Ÿéšé¼ æ ‡ç§»åŠ¨
- [x] è§†è§‰æ•ˆæœæ¸…æ™°ä¸“ä¸š
