<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KeedaVault</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script>
    // CRITICAL: Apply theme class SYNCHRONOUSLY before any content renders
    // This must run before the style tag below to prevent flash
    (function () {
      try {
        // Try to get theme from localStorage first (faster than async store)
        // The ThemeManager will sync this with the Tauri store
        let appearance = localStorage.getItem('keedavault_theme_cache') || 'system';

        // Determine if we should use dark mode
        const isDark = appearance === 'dark' ||
          (appearance === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);

        // Apply theme immediately BEFORE CSS loads
        if (isDark) {
          document.documentElement.classList.add('dark');
        }

        // Update background color to match theme
        document.documentElement.style.backgroundColor = isDark ? '#1c1c1e' : '#ffffff';
      } catch (e) {
        // Fallback to system preference
        const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (isDark) {
          document.documentElement.classList.add('dark');
          document.documentElement.style.backgroundColor = '#1c1c1e';
        } else {
          document.documentElement.style.backgroundColor = '#ffffff';
        }
      }
    })();
  </script>
  <style>
    /* Critical CSS - Inline to prevent flash */
    :root {
      --color-bg-primary: #ffffff;
      --color-bg-secondary: #f5f5f7;
      --color-bg-tertiary: #fafafa;
      --color-bg-sidebar: rgba(249, 250, 251, 0.65);
      --color-bg-hover: #f0f0f2;
      --color-bg-active: #e8e8ea;
      --color-accent: #007aff;
      --color-accent-hover: #0051d5;
      --color-accent-light: #e5f1ff;
      --color-text-primary: #111827;
      --color-text-secondary: #4b5563;
      --color-text-tertiary: #6b7280;
      --color-text-placeholder: #9ca3af;
      --color-border-light: #e5e5e7;
      --color-border-medium: #d2d2d7;
      --color-border-dark: #b0b0b5;
    }

    .dark {
      --color-bg-primary: #1c1c1e;
      --color-bg-secondary: #000000;
      --color-bg-tertiary: #2c2c2e;
      --color-bg-sidebar: rgba(21, 21, 22, 0.65);
      --color-bg-hover: #3a3a3c;
      --color-bg-active: #48484a;
      --color-accent: #0a84ff;
      --color-accent-hover: #0071e3;
      --color-accent-light: rgba(10, 132, 255, 0.15);
      --color-text-primary: #ffffff;
      --color-text-secondary: #ebebf599;
      --color-text-tertiary: #ebebf54d;
      --color-text-placeholder: #ebebf54d;
      --color-border-light: #38383a;
      --color-border-medium: #48484a;
      --color-border-dark: #636366;
    }

    html {
      background-color: #ffffff;
    }

    @media (prefers-color-scheme: dark) {
      html {
        background-color: #1c1c1e;
      }
    }

    html.dark {
      background-color: #1c1c1e;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: transparent;
      margin: 0;
      padding: 0;
    }

    body.light-mode {
      background-color: #ffffff;
    }

    body.dark-mode {
      background-color: #1c1c1e;
    }

    /* Custom Scrollbar for Mac-like feel */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #d1d5db;
      border-radius: 4px;
    }

    .dark ::-webkit-scrollbar-thumb {
      background: #48484a;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #9ca3af;
    }

    .dark ::-webkit-scrollbar-thumb:hover {
      background: #636366;
    }
  </style>


</head>

<body>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>

</html>